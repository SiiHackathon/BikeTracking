@{
    ViewBag.Title = "Home Page";
}

<div id="map"></div>

@section scripts
{
    <script src="~/Scripts/BikeOnMap.js"></script>
    <script>
        var map;
        var route;
      function initMap() {
          map = new google.maps.Map(document.getElementById('map'), {
              center: { lat: 52.354, lng: 370.17246 },
              zoom: 5
          });

          var directionsService = new google.maps.DirectionsService();
          // TO pass points form server
          var request = {
              origin: '54.402658,18.572466',
              destination: '52.954730,-1.158253',
              travelMode: 'BICYCLING'
          };
          var directionsDisplay = new google.maps.DirectionsRenderer();
          directionsDisplay.setMap(map);
          directionsService.route(request, function (result, status) {
              if (status == 'OK') {
                  route = result;
                  directionsDisplay.setDirections(route);

                  // to add points from server
                  var point = Sii.findPositionOnRoute(213632, route.routes[0].legs[0]);
                  var marker = new google.maps.Marker({
                      position: point,
                      map: map,
                      title: 'I am here!'
                  });
              }
          });
      };
      
    </script>
    <script src="https://maps.googleapis.com/maps/api/js?key=@(System.Configuration.ConfigurationManager.AppSettings["GoogleApiKey"])&callback=initMap" async defer></script>
}